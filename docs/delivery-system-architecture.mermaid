%%{init: {'theme': 'base', 'themeVariables': { 'primaryColor': '#e1f5fe', 'primaryTextColor': '#01579b', 'primaryBorderColor': '#0288d1', 'lineColor': '#37474f', 'secondaryColor': '#fff3e0', 'tertiaryColor': '#f3e5f5'}}}%%

flowchart TB
    %% â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    %% ğŸ¯ ë°°ë‹¬ì•± ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ - ëŒ€ëŸ‰ ì£¼ë¬¸ ì´ë²¤íŠ¸ ëŒ€ì‘
    %% â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    %% â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    %% í´ë¼ì´ì–¸íŠ¸ & ì¸ì¦ ì˜ì—­
    %% â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    subgraph CLIENT["ğŸ‘¤ í´ë¼ì´ì–¸íŠ¸ ì˜ì—­"]
        direction LR
        Mobile["ğŸ“± ëª¨ë°”ì¼ ì•±"]
        Web["ğŸŒ ì›¹ ë¸Œë¼ìš°ì €"]
    end

    subgraph AUTH["ğŸ” ì¸ì¦ ì˜ì—­"]
        KeyCloak["ğŸ”‘ KeyCloak<br/>ì¸ì¦ì„œë²„<br/>â”€â”€â”€<br/>JWT í† í° ë°œê¸‰<br/>OAuth2/OIDC"]
    end

    %% â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    %% API Gateway & ì„œë¹„ìŠ¤ ë””ìŠ¤ì»¤ë²„ë¦¬
    %% â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    subgraph GATEWAY["ğŸšª API Gateway ì˜ì—­"]
        direction TB
        APIGateway["ğŸš€ API Gateway<br/>â”€â”€â”€<br/>â€¢ JWT í† í° ê²€ì¦<br/>â€¢ Rate Limiter âš¡<br/>â€¢ ë¼ìš°íŒ…<br/>â€¢ Trace ID ì£¼ì…"]
        
        RateLimiter["âš¡ Rate Limiter<br/>â”€â”€â”€<br/>Token Bucket<br/>ì‚¬ìš©ì/IPë³„ ì œí•œ"]
    end

    subgraph DISCOVERY["ğŸ” ì„œë¹„ìŠ¤ ë””ìŠ¤ì»¤ë²„ë¦¬"]
        Eureka["ğŸ“‹ Eureka Server<br/>â”€â”€â”€<br/>ì„œë¹„ìŠ¤ ë ˆì§€ìŠ¤íŠ¸ë¦¬<br/>Health Check<br/>ë¡œë“œë°¸ëŸ°ì‹± ì •ë³´"]
    end

    subgraph TRACING["ğŸ“Š ë¶„ì‚° ì¶”ì "]
        Zipkin["ğŸ”¬ Zipkin<br/>â”€â”€â”€<br/>Trace ID ìˆ˜ì§‘<br/>Span ì‹œê°í™”<br/>ì§€ì—° ë¶„ì„"]
    end

    %% â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    %% í•µì‹¬ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì˜ì—­
    %% â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    subgraph SERVICES["âš™ï¸ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì˜ì—­"]
        direction TB
        
        subgraph ORDER_SVC["ğŸ“¦ ì£¼ë¬¸ ì„œë¹„ìŠ¤ (í•«íŒ¨ìŠ¤)"]
            OrderAPI["ğŸ›’ ì£¼ë¬¸ API<br/>â”€â”€â”€<br/>Feign Client<br/>Resilience4j<br/>â€¢ Circuit Breaker<br/>â€¢ Timeout<br/>â€¢ Retry + ë©±ë“±í‚¤"]
        end

        subgraph PAYMENT_SVC["ğŸ’³ ê²°ì œ ì„œë¹„ìŠ¤"]
            PaymentAPI["ğŸ’° ê²°ì œ API<br/>â”€â”€â”€<br/>PG ì—°ë™<br/>â€¢ ì„œí‚·ë¸Œë ˆì´ì»¤<br/>â€¢ íƒ€ì„ì•„ì›ƒ<br/>â€¢ ë©±ë“±í‚¤ ê²€ì¦"]
            
            PGGateway["ğŸ¦ PG Gateway<br/>â”€â”€â”€<br/>ì™¸ë¶€ ê²°ì œì‚¬ ì—°ë™<br/>Fallback ì²˜ë¦¬"]
        end

        subgraph INVENTORY_SVC["ğŸ“¦ ì¬ê³  ì„œë¹„ìŠ¤"]
            InventoryAPI["ğŸ“Š ì¬ê³  API<br/>â”€â”€â”€<br/>ì¬ê³  ì˜ˆì•½/ì°¨ê°<br/>SAGA ë³´ìƒ ì§€ì›"]
        end

        subgraph NOTIFICATION_SVC["ğŸ”” ì•Œë¦¼ ì„œë¹„ìŠ¤"]
            NotificationAPI["ğŸ“¨ ì•Œë¦¼ API<br/>â”€â”€â”€<br/>Push/SMS/ì¹´ì¹´ì˜¤<br/>ë¹„ë™ê¸° ë°œì†¡"]
        end

        subgraph QUERY_SVC["ğŸ” ì¡°íšŒ ì„œë¹„ìŠ¤ (CQRS)"]
            QueryAPI["ğŸ“– ì¡°íšŒ API<br/>â”€â”€â”€<br/>ì£¼ë¬¸ëª©ë¡/ê²€ìƒ‰<br/>í‚¤ì…‹ í˜ì´ì§•"]
        end
    end

    %% â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    %% ë°ì´í„° ì €ì¥ì†Œ ì˜ì—­
    %% â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    subgraph DATABASES["ğŸ—„ï¸ ë°ì´í„° ì €ì¥ì†Œ"]
        direction TB
        
        subgraph WRITE_DB["âœï¸ ì“°ê¸° DB (Master)"]
            OrderDB["ğŸ—ƒï¸ ì£¼ë¬¸ DB<br/>â”€â”€â”€<br/>PostgreSQL<br/>â€¢ ìƒ¤ë”© (ê°€ê²ŒID ê¸°ì¤€)<br/>â€¢ Outbox í…Œì´ë¸”<br/>â€¢ íŠ¸ëœì­ì…˜ ë³´ì¥"]
            
            Outbox["ğŸ“¤ Outbox í…Œì´ë¸”<br/>â”€â”€â”€<br/>ì´ë²¤íŠ¸ ì €ì¥<br/>ë°œí–‰ ìƒíƒœ ê´€ë¦¬"]
        end

        subgraph READ_DB["ğŸ“– ì½ê¸° ëª¨ë¸ (CQRS)"]
            ReplicaDB["ğŸ”„ Replica DB<br/>â”€â”€â”€<br/>ì½ê¸° ì „ìš©<br/>ë¹„ë™ê¸° ë³µì œ"]
            
            ElasticSearch["ğŸ” Elasticsearch<br/>â”€â”€â”€<br/>ì£¼ë¬¸ ê²€ìƒ‰<br/>ì‹¤ì‹œê°„ ì¸ë±ì‹±"]
        end
    end

    subgraph CACHE["âš¡ ìºì‹œ ì˜ì—­"]
        direction TB
        Redis["ğŸ”´ Redis Cluster<br/>â”€â”€â”€<br/>â€¢ Cache-Aside<br/>â€¢ Singleflight ì ê¸ˆ<br/>â€¢ TTL ê´€ë¦¬<br/>â€¢ Pub/Sub ì´ë²¤íŠ¸<br/>â€¢ ë©±ë“±í‚¤ ì €ì¥"]
    end

    %% â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    %% ë©”ì‹œì§€ í & ì´ë²¤íŠ¸ ì²˜ë¦¬
    %% â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    subgraph MESSAGE_QUEUE["ğŸ“¬ ë©”ì‹œì§€ í ì˜ì—­"]
        direction TB
        
        OutboxWorker["âš™ï¸ Outbox Worker<br/>â”€â”€â”€<br/>í´ë§/CDC<br/>ì´ë²¤íŠ¸ ë°œí–‰"]
        
        subgraph KAFKA["ğŸ“¡ Kafka Cluster"]
            KafkaBroker["ğŸ¯ Kafka Broker<br/>â”€â”€â”€<br/>â€¢ ISR ë³µì œ<br/>â€¢ íŒŒí‹°ì…˜ ë¶„ì‚°<br/>â€¢ ìˆœì„œ ë³´ì¥"]
            
            Topics["ğŸ“‹ Topics<br/>â”€â”€â”€<br/>order-events<br/>payment-events<br/>inventory-events"]
        end
    end

    %% â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    %% SAGA íŒ¨í„´ (ë³´ìƒ íŠ¸ëœì­ì…˜)
    %% â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    subgraph SAGA["ğŸ”„ SAGA Orchestrator"]
        SAGACoordinator["ğŸ­ SAGA ì½”ë””ë„¤ì´í„°<br/>â”€â”€â”€<br/>ìƒíƒœ ë¨¸ì‹  ê´€ë¦¬<br/>ë³´ìƒ íŠ¸ëœì­ì…˜ ì‹¤í–‰<br/>â€¢ ì¬ê³  ë¡¤ë°±<br/>â€¢ ì£¼ë¬¸ ì·¨ì†Œ"]
    end

    %% â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    %% ì‹¤ì‹œê°„ ìŠ¤íŠ¸ë¦¼ ì²˜ë¦¬ & ë°ì´í„° íŒŒì´í”„ë¼ì¸
    %% â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    subgraph STREAM["ğŸŒŠ ìŠ¤íŠ¸ë¦¼ ì²˜ë¦¬ ì˜ì—­"]
        direction TB
        
        Flink["âš¡ Apache Flink<br/>â”€â”€â”€<br/>â€¢ ì‹¤ì‹œê°„ ì§‘ê³„<br/>â€¢ CEP ì´ë²¤íŠ¸ íƒì§€<br/>â€¢ RocksDB State Backend<br/>â€¢ Checkpointing"]
        
        FlinkState["ğŸ’¾ RocksDB<br/>State Backend<br/>â”€â”€â”€<br/>ìƒíƒœ ì €ì¥<br/>ì¥ì•  ë³µêµ¬"]
    end

    subgraph SINK["ğŸ“¥ ë°ì´í„° ì‹±í¬"]
        direction TB
        DataWarehouse["ğŸ¢ Data Warehouse<br/>â”€â”€â”€<br/>ë¶„ì„ìš© ì €ì¥ì†Œ<br/>BigQuery/Snowflake"]
        
        Metrics["ğŸ“ˆ Metrics Store<br/>â”€â”€â”€<br/>ì‹¤ì‹œê°„ ëŒ€ì‹œë³´ë“œ<br/>ì£¼ë¬¸ í˜„í™© ëª¨ë‹ˆí„°ë§"]
    end

    %% â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    %% ì—°ê²° í”Œë¡œìš° ì •ì˜
    %% â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    %% â”€â”€â”€ ì¸ì¦ í”Œë¡œìš° â”€â”€â”€
    Mobile & Web -->|"â‘  í† í° ìš”ì²­"| KeyCloak
    KeyCloak -->|"â‘¡ JWT ë°œê¸‰"| Mobile & Web
    Mobile & Web -->|"â‘¢ API ìš”ì²­<br/>(JWT + ë©±ë“±í‚¤)"| APIGateway

    %% â”€â”€â”€ Gateway ì²˜ë¦¬ â”€â”€â”€
    APIGateway --> RateLimiter
    RateLimiter -->|"â‘£ í† í° ê²€ì¦ &<br/>Rate Limit ì²´í¬"| APIGateway
    APIGateway -->|"â‘¤ ì„œë¹„ìŠ¤ ì¡°íšŒ"| Eureka
    Eureka -->|"â‘¥ ì¸ìŠ¤í„´ìŠ¤ ì •ë³´"| APIGateway

    %% â”€â”€â”€ í•«íŒ¨ìŠ¤: ì£¼ë¬¸ ìƒì„± (ë™ê¸°) â”€â”€â”€
    APIGateway -->|"â‘¦ ì£¼ë¬¸ ìš”ì²­<br/>(Trace ID)"| OrderAPI
    OrderAPI -->|"â‘§ ìºì‹œ ì¡°íšŒ<br/>(ì‹±ê¸€í”Œë¼ì´íŠ¸)"| Redis
    OrderAPI -->|"â‘¨ ì¬ê³  ì˜ˆì•½ ìš”ì²­"| InventoryAPI
    InventoryAPI -->|"â‘© ì¬ê³  ì°¨ê°"| OrderDB
    OrderAPI -->|"â‘ª ì£¼ë¬¸ ì €ì¥ +<br/>Outbox ê¸°ë¡<br/>(ë‹¨ì¼ íŠ¸ëœì­ì…˜)"| OrderDB
    OrderDB --> Outbox
    OrderAPI -->|"â‘« PENDING ì‘ë‹µ<br/>(200ms ì´ë‚´)"| APIGateway

    %% â”€â”€â”€ ë¹„ë™ê¸° ì²˜ë¦¬: ì´ë²¤íŠ¸ ë°œí–‰ â”€â”€â”€
    OutboxWorker -->|"â‘¬ í´ë§"| Outbox
    OutboxWorker -->|"â‘­ ì´ë²¤íŠ¸ ë°œí–‰"| KafkaBroker
    KafkaBroker --> Topics

    %% â”€â”€â”€ ë¹„ë™ê¸°: ê²°ì œ ì²˜ë¦¬ â”€â”€â”€
    Topics -->|"â‘® order-created<br/>ì´ë²¤íŠ¸ êµ¬ë…"| PaymentAPI
    PaymentAPI -->|"â‘¯ ë©±ë“±í‚¤ í™•ì¸"| Redis
    PaymentAPI -->|"â‘° PG ìŠ¹ì¸ ìš”ì²­<br/>(ì„œí‚·ë¸Œë ˆì´ì»¤)"| PGGateway
    PGGateway -->|"â‘± ê²°ì œ ê²°ê³¼"| PaymentAPI
    PaymentAPI -->|"â‘² payment-result<br/>ì´ë²¤íŠ¸ ë°œí–‰"| KafkaBroker

    %% â”€â”€â”€ ë¹„ë™ê¸°: ì•Œë¦¼ ë°œì†¡ â”€â”€â”€
    Topics -->|"â‘³ ì´ë²¤íŠ¸ êµ¬ë…"| NotificationAPI
    NotificationAPI -->|"ã‰‘ Push/SMS ë°œì†¡"| Mobile

    %% â”€â”€â”€ SAGA: ì‹¤íŒ¨ ì‹œ ë³´ìƒ â”€â”€â”€
    Topics -->|"ã‰’ payment-failed<br/>ì´ë²¤íŠ¸"| SAGACoordinator
    SAGACoordinator -->|"ã‰“ ì¬ê³  ë¡¤ë°±"| InventoryAPI
    SAGACoordinator -->|"ã‰” ì£¼ë¬¸ ì·¨ì†Œ<br/>ìƒíƒœ ë³€ê²½"| OrderDB
    SAGACoordinator -->|"ã‰• ë³´ìƒ ì™„ë£Œ<br/>ì´ë²¤íŠ¸ ë°œí–‰"| KafkaBroker

    %% â”€â”€â”€ CQRS: ì½ê¸° ëª¨ë¸ ë™ê¸°í™” â”€â”€â”€
    Topics -->|"ã‰– ì´ë²¤íŠ¸ êµ¬ë…"| ReplicaDB
    Topics -->|"ã‰— ì¸ë±ì‹±"| ElasticSearch

    %% â”€â”€â”€ ì¡°íšŒ í”Œë¡œìš° â”€â”€â”€
    APIGateway -->|"ã‰˜ ì¡°íšŒ ìš”ì²­"| QueryAPI
    QueryAPI -->|"ã‰™ ìºì‹œ íˆíŠ¸"| Redis
    QueryAPI -->|"ã‰š ìºì‹œ ë¯¸ìŠ¤ ì‹œ<br/>í‚¤ì…‹ í˜ì´ì§•"| ReplicaDB
    QueryAPI -->|"ã‰› ê²€ìƒ‰ ì¿¼ë¦¬"| ElasticSearch

    %% â”€â”€â”€ ì‹¤ì‹œê°„ ìŠ¤íŠ¸ë¦¼ íŒŒì´í”„ë¼ì¸ â”€â”€â”€
    KafkaBroker -->|"ã‰œ ìŠ¤íŠ¸ë¦¼ ì†Œë¹„"| Flink
    Flink --> FlinkState
    Flink -->|"ã‰ ì§‘ê³„ ë°ì´í„°<br/>ì‹±í¬"| DataWarehouse
    Flink -->|"ã‰ ì‹¤ì‹œê°„ ë©”íŠ¸ë¦­"| Metrics
    Flink -->|"ã‰Ÿ ì´ìƒ íƒì§€ ì•Œë¦¼"| Redis

    %% â”€â”€â”€ ë¶„ì‚° ì¶”ì  â”€â”€â”€
    OrderAPI & PaymentAPI & InventoryAPI & QueryAPI -->|"Trace ì „ì†¡"| Zipkin

    %% â”€â”€â”€ Redis Pub/Sub â”€â”€â”€
    Redis -.->|"ãŠ± ìºì‹œ ë¬´íš¨í™”<br/>Pub/Sub"| QueryAPI

    %% â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    %% ìŠ¤íƒ€ì¼ ì •ì˜
    %% â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    
    classDef clientStyle fill:#e3f2fd,stroke:#1565c0,stroke-width:2px
    classDef authStyle fill:#fff8e1,stroke:#f57f17,stroke-width:2px
    classDef gatewayStyle fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px
    classDef serviceStyle fill:#e8f5e9,stroke:#2e7d32,stroke-width:2px
    classDef dbStyle fill:#fce4ec,stroke:#c2185b,stroke-width:2px
    classDef cacheStyle fill:#ffebee,stroke:#c62828,stroke-width:2px
    classDef kafkaStyle fill:#fff3e0,stroke:#e65100,stroke-width:2px
    classDef streamStyle fill:#e0f7fa,stroke:#00838f,stroke-width:2px
    classDef sagaStyle fill:#f1f8e9,stroke:#558b2f,stroke-width:2px
    classDef tracingStyle fill:#eceff1,stroke:#455a64,stroke-width:2px

    class Mobile,Web clientStyle
    class KeyCloak authStyle
    class APIGateway,RateLimiter gatewayStyle
    class Eureka tracingStyle
    class Zipkin tracingStyle
    class OrderAPI,PaymentAPI,InventoryAPI,NotificationAPI,QueryAPI,PGGateway serviceStyle
    class OrderDB,Outbox,ReplicaDB,ElasticSearch dbStyle
    class Redis cacheStyle
    class OutboxWorker,KafkaBroker,Topics kafkaStyle
    class Flink,FlinkState streamStyle
    class DataWarehouse,Metrics streamStyle
    class SAGACoordinator sagaStyle
